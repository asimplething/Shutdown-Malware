#include <iostream>
#include <Windows.h>
using namespace std;
// 0 for turning off stealth mode, 1 for turning on stealth mode
void Stealth(bool stealth)
{
    if (!stealth)
    {
        ShowWindow(FindWindowA("ConsoleWindowClass", NULL), 1); // Visible window
        cerr << "Stealth mode is offline." << endl
             << flush;
    }
    else
    {
        ShowWindow(FindWindowA("ConsoleWindowClass", NULL), 0); // Invisible window
        FreeConsole();
    }
}
// 0 for immediately turnning off the machine, 1 is otherwise wating 10s before turning off
void Waiting(bool isWait)
{
    if (isWait)
    {
        cerr << "Waiting mode is online." << endl;
        int countDown = 10;
        while (countDown >= 1)
        {
            cout << countDown << " ..." << endl;
            countDown--;
            Sleep(1000);
        }
        cout << "shutting down now" << endl;
    }
}
int main(int argc, char *argv[])
{
    Stealth(1);
    Waiting(1);
    system("shutdown.exe /s /t 00 \n\n");
    return 0;
}